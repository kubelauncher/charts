# MySQL with custom configuration
auth:
  rootPassword: "customroot123"
  database: "customdb"
  username: "customuser"
  password: "custompass123"

primary:
  configuration: |
    [mysqld]
    max_connections=150
    innodb_buffer_pool_size=128M
  # Use /tmp for data to avoid K8s emptyDir permission issues
  extraEnvVars:
    - name: MYSQL_DATA_DIR
      value: "/tmp/mysql-data"
    - name: MYSQL_LOG_DIR
      value: "/tmp/mysql-logs"
  resourcesPreset: "small"
  persistence:
    enabled: false
  # Increase startup probe timeout for slow init
  startupProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 60
  # Run as root with full capabilities to allow mysql to create data directories
  podSecurityContext:
    enabled: false
  containerSecurityContext:
    enabled: true
    runAsUser: 0
    runAsGroup: 0
    runAsNonRoot: false
    allowPrivilegeEscalation: true
    readOnlyRootFilesystem: false
    capabilities:
      drop: []
    seccompProfile:
      type: Unconfined
