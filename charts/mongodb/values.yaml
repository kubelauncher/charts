## @section Global parameters

## @param global.imageRegistry Global Docker image registry
## @param global.imagePullSecrets Global Docker registry secret names as an array
## @param global.defaultStorageClass Global default StorageClass for Persistent Volume(s)
## @param global.storageClass DEPRECATED: use global.defaultStorageClass instead
## @param global.mongodb.auth.rootPassword Global MongoDB root password (overrides `auth.rootPassword`)
## @param global.mongodb.auth.rootUsername Global MongoDB root username
## @param global.mongodb.auth.username Global MongoDB custom username
## @param global.mongodb.auth.password Global MongoDB custom user password
## @param global.mongodb.auth.database Global MongoDB custom database
## @param global.mongodb.auth.existingSecret Global existing secret for MongoDB credentials
## @param global.mongodb.service.ports.mongodb Global MongoDB service port
global:
  imageRegistry: ""
  imagePullSecrets: []
  defaultStorageClass: ""
  storageClass: ""
  mongodb:
    auth:
      rootPassword: ""
      rootUsername: ""
      username: ""
      password: ""
      database: ""
      existingSecret: ""
    service:
      ports:
        mongodb: ""

## @section MongoDB image parameters

## @param image.registry MongoDB image registry
## @param image.repository MongoDB image repository
## @param image.tag MongoDB image tag (defaults to Chart appVersion)
## @param image.digest MongoDB image digest (overrides tag)
## @param image.pullPolicy MongoDB image pull policy
## @param image.pullSecrets MongoDB image pull secrets
image:
  registry: ghcr.io
  repository: kubelauncher/mongodb
  tag: ""
  digest: ""
  pullPolicy: Always
  pullSecrets: []

## @section MongoDB common parameters

## @param nameOverride Partially override mongodb.fullname
## @param fullnameOverride Fully override mongodb.fullname
## @param namespaceOverride Override the namespace
## @param commonLabels Labels to add to all deployed objects
## @param commonAnnotations Annotations to add to all deployed objects
## @param clusterDomain Kubernetes cluster domain
## @param extraDeploy Extra objects to deploy (evaluated as a template)
nameOverride: ""
fullnameOverride: ""
namespaceOverride: ""
commonLabels: {}
commonAnnotations: {}
clusterDomain: cluster.local
extraDeploy: []

## @param enableServiceLinks Enable Kubernetes service links in pod env vars
enableServiceLinks: false

## @param architecture MongoDB architecture (`standalone` or `replicaset`)
architecture: standalone

## @section Replica Set parameters

## @param replicaset.name Replica set name
## @param replicaset.existingKeyfileSecret Existing secret containing the keyfile (key: `keyfile`)
replicaset:
  name: rs0
  existingKeyfileSecret: ""

## @section MongoDB auth parameters

## @param auth.rootUsername Root username
## @param auth.rootPassword Password for the root user
## @param auth.username Name for a custom MongoDB user
## @param auth.password Password for the custom MongoDB user
## @param auth.database Name for a custom MongoDB database
## @param auth.existingSecret Name of existing secret containing credentials
## @param auth.secretKeys.rootPasswordKey Key in existing secret for root password
## @param auth.secretKeys.userPasswordKey Key in existing secret for user password
auth:
  rootUsername: root
  rootPassword: ""
  username: ""
  password: ""
  database: ""
  existingSecret: ""
  secretKeys:
    rootPasswordKey: mongodb-root-password
    userPasswordKey: mongodb-password

## @section MongoDB primary parameters

## @param primary.replicaCount Number of primary replicas
## @param primary.name Name for the primary statefulset
## @param primary.containerPorts.mongodb MongoDB primary container port
## @param primary.configuration MongoDB primary configuration (mongod.conf content)
primary:
  replicaCount: 1
  name: primary
  containerPorts:
    mongodb: 27017
  configuration: ""

  ## @param primary.resourcesPreset Resource preset (nano, micro, small)
  ## @param primary.resources Custom resource requests/limits (overrides preset)
  resourcesPreset: "nano"
  resources: {}

  ## @param primary.podSecurityContext.enabled Enable pod security context
  ## @param primary.podSecurityContext.fsGroup Group ID for the pod volumes
  podSecurityContext:
    enabled: true
    fsGroup: 1001

  ## @param primary.containerSecurityContext.enabled Enable container security context
  ## @param primary.containerSecurityContext.runAsUser User ID for the container
  ## @param primary.containerSecurityContext.runAsGroup Group ID for the container
  ## @param primary.containerSecurityContext.runAsNonRoot Require non-root user
  ## @param primary.containerSecurityContext.allowPrivilegeEscalation Disallow privilege escalation
  ## @param primary.containerSecurityContext.readOnlyRootFilesystem Read-only root filesystem
  ## @param primary.containerSecurityContext.capabilities.drop Capabilities to drop
  ## @param primary.containerSecurityContext.seccompProfile.type Seccomp profile type
  containerSecurityContext:
    enabled: true
    runAsUser: 1001
    runAsGroup: 1001
    runAsNonRoot: true
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: false
    capabilities:
      drop: ["ALL"]
    seccompProfile:
      type: RuntimeDefault

  ## @param primary.startupProbe.enabled Enable startup probe
  ## @param primary.startupProbe.initialDelaySeconds Startup probe initial delay
  ## @param primary.startupProbe.periodSeconds Startup probe period
  ## @param primary.startupProbe.timeoutSeconds Startup probe timeout
  ## @param primary.startupProbe.failureThreshold Startup probe failure threshold
  ## @param primary.startupProbe.successThreshold Startup probe success threshold
  startupProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 10
    failureThreshold: 30
    successThreshold: 1

  ## @param primary.livenessProbe.enabled Enable liveness probe
  ## @param primary.livenessProbe.initialDelaySeconds Liveness probe initial delay
  ## @param primary.livenessProbe.periodSeconds Liveness probe period
  ## @param primary.livenessProbe.timeoutSeconds Liveness probe timeout
  ## @param primary.livenessProbe.failureThreshold Liveness probe failure threshold
  ## @param primary.livenessProbe.successThreshold Liveness probe success threshold
  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 10
    failureThreshold: 6
    successThreshold: 1

  ## @param primary.readinessProbe.enabled Enable readiness probe
  ## @param primary.readinessProbe.initialDelaySeconds Readiness probe initial delay
  ## @param primary.readinessProbe.periodSeconds Readiness probe period
  ## @param primary.readinessProbe.timeoutSeconds Readiness probe timeout
  ## @param primary.readinessProbe.failureThreshold Readiness probe failure threshold
  ## @param primary.readinessProbe.successThreshold Readiness probe success threshold
  readinessProbe:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 10
    failureThreshold: 6
    successThreshold: 1

  ## @param primary.persistence.enabled Enable persistence using PVC
  ## @param primary.persistence.storageClass PVC Storage Class
  ## @param primary.persistence.accessModes PVC access modes
  ## @param primary.persistence.size PVC size
  ## @param primary.persistence.existingClaim Name of existing PVC to use
  ## @param primary.persistence.mountPath Mount path for the data volume
  ## @param primary.persistence.annotations PVC annotations
  ## @param primary.persistence.labels PVC labels
  persistence:
    enabled: true
    storageClass: ""
    accessModes:
      - ReadWriteOnce
    size: 8Gi
    existingClaim: ""
    mountPath: /data/mongodb
    annotations: {}
    labels: {}

  ## @param primary.service.type Service type
  ## @param primary.service.ports.mongodb Service port
  ## @param primary.service.nodePorts.mongodb NodePort (when type is NodePort)
  ## @param primary.service.clusterIP Static ClusterIP
  ## @param primary.service.annotations Service annotations
  ## @param primary.service.labels Service labels
  ## @param primary.service.headless.annotations Headless service annotations
  service:
    type: ClusterIP
    ports:
      mongodb: 27017
    nodePorts:
      mongodb: ""
    clusterIP: ""
    annotations: {}
    labels: {}
    headless:
      annotations: {}

  ## @param primary.nodeSelector Node labels for pod assignment
  ## @param primary.tolerations Tolerations for pod assignment
  ## @param primary.affinity Affinity rules for pod assignment
  ## @param primary.podLabels Extra labels for pods
  ## @param primary.podAnnotations Extra annotations for pods
  ## @param primary.extraVolumes Extra volumes
  ## @param primary.extraVolumeMounts Extra volume mounts
  ## @param primary.extraEnvVars Extra environment variables
  ## @param primary.sidecars Extra sidecar containers
  ## @param primary.initContainers Extra init containers
  nodeSelector: {}
  tolerations: []
  affinity: {}
  podLabels: {}
  podAnnotations: {}
  extraVolumes: []
  extraVolumeMounts: []
  extraEnvVars: []
  sidecars: []
  initContainers: []

## @section MongoDB secondary parameters

## @param secondary.replicaCount Number of secondary replicas
## @param secondary.name Name for the secondary statefulset
## @param secondary.containerPorts.mongodb MongoDB secondary container port
secondary:
  replicaCount: 2
  name: secondary
  containerPorts:
    mongodb: 27017

  ## @param secondary.resourcesPreset Resource preset (nano, micro, small)
  ## @param secondary.resources Custom resource requests/limits (overrides preset)
  resourcesPreset: "nano"
  resources: {}

  ## @param secondary.podSecurityContext.enabled Enable pod security context
  ## @param secondary.podSecurityContext.fsGroup Group ID for the pod volumes
  podSecurityContext:
    enabled: true
    fsGroup: 1001

  ## @param secondary.containerSecurityContext.enabled Enable container security context
  ## @param secondary.containerSecurityContext.runAsUser User ID for the container
  ## @param secondary.containerSecurityContext.runAsGroup Group ID for the container
  ## @param secondary.containerSecurityContext.runAsNonRoot Require non-root user
  ## @param secondary.containerSecurityContext.allowPrivilegeEscalation Disallow privilege escalation
  ## @param secondary.containerSecurityContext.readOnlyRootFilesystem Read-only root filesystem
  ## @param secondary.containerSecurityContext.capabilities.drop Capabilities to drop
  ## @param secondary.containerSecurityContext.seccompProfile.type Seccomp profile type
  containerSecurityContext:
    enabled: true
    runAsUser: 1001
    runAsGroup: 1001
    runAsNonRoot: true
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: false
    capabilities:
      drop: ["ALL"]
    seccompProfile:
      type: RuntimeDefault

  ## @param secondary.startupProbe.enabled Enable startup probe
  ## @param secondary.startupProbe.initialDelaySeconds Startup probe initial delay
  ## @param secondary.startupProbe.periodSeconds Startup probe period
  ## @param secondary.startupProbe.timeoutSeconds Startup probe timeout
  ## @param secondary.startupProbe.failureThreshold Startup probe failure threshold
  ## @param secondary.startupProbe.successThreshold Startup probe success threshold
  startupProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 10
    failureThreshold: 30
    successThreshold: 1

  ## @param secondary.livenessProbe.enabled Enable liveness probe
  ## @param secondary.livenessProbe.initialDelaySeconds Liveness probe initial delay
  ## @param secondary.livenessProbe.periodSeconds Liveness probe period
  ## @param secondary.livenessProbe.timeoutSeconds Liveness probe timeout
  ## @param secondary.livenessProbe.failureThreshold Liveness probe failure threshold
  ## @param secondary.livenessProbe.successThreshold Liveness probe success threshold
  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 10
    failureThreshold: 6
    successThreshold: 1

  ## @param secondary.readinessProbe.enabled Enable readiness probe
  ## @param secondary.readinessProbe.initialDelaySeconds Readiness probe initial delay
  ## @param secondary.readinessProbe.periodSeconds Readiness probe period
  ## @param secondary.readinessProbe.timeoutSeconds Readiness probe timeout
  ## @param secondary.readinessProbe.failureThreshold Readiness probe failure threshold
  ## @param secondary.readinessProbe.successThreshold Readiness probe success threshold
  readinessProbe:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 10
    failureThreshold: 6
    successThreshold: 1

  ## @param secondary.persistence.enabled Enable persistence using PVC
  ## @param secondary.persistence.storageClass PVC Storage Class
  ## @param secondary.persistence.accessModes PVC access modes
  ## @param secondary.persistence.size PVC size
  ## @param secondary.persistence.mountPath Mount path for the data volume
  ## @param secondary.persistence.annotations PVC annotations
  ## @param secondary.persistence.labels PVC labels
  persistence:
    enabled: true
    storageClass: ""
    accessModes:
      - ReadWriteOnce
    size: 8Gi
    mountPath: /data/mongodb
    annotations: {}
    labels: {}

  ## @param secondary.service.headless.annotations Headless service annotations
  service:
    headless:
      annotations: {}

  ## @param secondary.nodeSelector Node labels for pod assignment
  ## @param secondary.tolerations Tolerations for pod assignment
  ## @param secondary.affinity Affinity rules for pod assignment
  ## @param secondary.podLabels Extra labels for pods
  ## @param secondary.podAnnotations Extra annotations for pods
  ## @param secondary.extraVolumes Extra volumes
  ## @param secondary.extraVolumeMounts Extra volume mounts
  ## @param secondary.extraEnvVars Extra environment variables
  ## @param secondary.sidecars Extra sidecar containers
  ## @param secondary.initContainers Extra init containers
  nodeSelector: {}
  tolerations: []
  affinity: {}
  podLabels: {}
  podAnnotations: {}
  extraVolumes: []
  extraVolumeMounts: []
  extraEnvVars: []
  sidecars: []
  initContainers: []

## @section Network Policy
## @param networkPolicy.enabled Enable network policy
## @param networkPolicy.allowExternal Allow external connections
## @param networkPolicy.additionalRules Additional network policy rules
networkPolicy:
  enabled: false
  allowExternal: true
  additionalRules: []

## @section ServiceAccount parameters

## @param serviceAccount.create Create a ServiceAccount
## @param serviceAccount.name ServiceAccount name (generated if not set)
## @param serviceAccount.automountServiceAccountToken Automount API credentials
## @param serviceAccount.annotations ServiceAccount annotations
serviceAccount:
  create: true
  name: ""
  automountServiceAccountToken: false
  annotations: {}

## @section Metrics parameters

## @param metrics.enabled Enable Prometheus metrics via exporter sidecar
## @param metrics.image.registry Exporter image registry
## @param metrics.image.repository Exporter image repository
## @param metrics.image.tag Exporter image tag
## @param metrics.image.pullPolicy Exporter image pull policy
## @param metrics.containerPorts.metrics Exporter container port
## @param metrics.serviceMonitor.enabled Create ServiceMonitor resource
## @param metrics.serviceMonitor.interval Prometheus scrape interval
## @param metrics.serviceMonitor.scrapeTimeout Prometheus scrape timeout
## @param metrics.serviceMonitor.labels Additional labels for the ServiceMonitor
metrics:
  enabled: false
  image:
    registry: ghcr.io
    repository: kubelauncher/mongodb-exporter
    tag: 0.47.2
    pullPolicy: Always
  containerPorts:
    metrics: 9216
  serviceMonitor:
    enabled: false
    interval: ""
    scrapeTimeout: ""
    labels: {}
