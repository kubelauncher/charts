## @section Global parameters

## @param global.imageRegistry Global Docker image registry
## @param global.imagePullSecrets Global Docker registry secret names as an array
## @param global.defaultStorageClass Global default StorageClass for Persistent Volume(s)
## @param global.storageClass DEPRECATED: use global.defaultStorageClass instead
## @param global.mariadb.auth.rootPassword Global MariaDB root password (overrides `auth.rootPassword`)
## @param global.mariadb.auth.username Global MariaDB custom username
## @param global.mariadb.auth.password Global MariaDB custom user password
## @param global.mariadb.auth.database Global MariaDB custom database
## @param global.mariadb.auth.existingSecret Global existing secret for MariaDB credentials
## @param global.mariadb.service.ports.mariadb Global MariaDB service port
global:
  imageRegistry: ""
  imagePullSecrets: []
  defaultStorageClass: ""
  storageClass: ""
  mariadb:
    auth:
      rootPassword: ""
      username: ""
      password: ""
      database: ""
      existingSecret: ""
    service:
      ports:
        mariadb: ""

## @section MariaDB image parameters

## @param image.registry MariaDB image registry
## @param image.repository MariaDB image repository
## @param image.tag MariaDB image tag (defaults to Chart appVersion)
## @param image.digest MariaDB image digest (overrides tag)
## @param image.pullPolicy MariaDB image pull policy
## @param image.pullSecrets MariaDB image pull secrets
image:
  registry: ghcr.io
  repository: kubelauncher/mariadb
  # renovate: image=ghcr.io/kubelauncher/mariadb
  tag: "12.2.2"
  digest: "sha256:c852491d9690b4104e94d9b186c8d4d989603997e1b86715c80d32b8b110c8b0"
  pullPolicy: Always
  pullSecrets: []

## @section MariaDB common parameters

## @param nameOverride Partially override mariadb.fullname
## @param fullnameOverride Fully override mariadb.fullname
## @param namespaceOverride Override the namespace
## @param commonLabels Labels to add to all deployed objects
## @param commonAnnotations Annotations to add to all deployed objects
## @param clusterDomain Kubernetes cluster domain
## @param extraDeploy Extra objects to deploy (evaluated as a template)
nameOverride: ""
fullnameOverride: ""
namespaceOverride: ""
commonLabels: {}
commonAnnotations: {}
clusterDomain: cluster.local
extraDeploy: []

## @param enableServiceLinks Enable Kubernetes service links in pod env vars
enableServiceLinks: false

## @param architecture MariaDB architecture (`standalone` or `replication`)
architecture: standalone

## @section MariaDB replication parameters
## @param replication.user Replication user name
## @param replication.password Replication user password
replication:
  user: "replicator"
  password: ""

## @section MariaDB auth parameters

## @param auth.rootPassword Password for the root user
## @param auth.username Name for a custom MariaDB user
## @param auth.password Password for the custom MariaDB user
## @param auth.database Name for a custom MariaDB database
## @param auth.existingSecret Name of existing secret containing credentials
## @param auth.secretKeys.rootPasswordKey Key in existing secret for root password
## @param auth.secretKeys.userPasswordKey Key in existing secret for user password
auth:
  rootPassword: ""
  username: ""
  password: ""
  database: ""
  existingSecret: ""
  secretKeys:
    rootPasswordKey: mariadb-root-password
    userPasswordKey: mariadb-password

## @section MariaDB primary parameters

## @param primary.replicaCount Number of primary replicas
## @param primary.name Name for the primary statefulset
## @param primary.containerPorts.mariadb MariaDB primary container port
## @param primary.configuration MariaDB primary configuration (my.cnf content)
primary:
  replicaCount: 1
  name: primary
  containerPorts:
    mariadb: 3306
  configuration: ""

  ## @param primary.resourcesPreset Resource preset (nano, micro, small)
  ## @param primary.resources Custom resource requests/limits (overrides preset)
  resourcesPreset: "nano"
  resources: {}

  ## @param primary.podSecurityContext.enabled Enable pod security context
  ## @param primary.podSecurityContext.fsGroup Group ID for the pod volumes
  podSecurityContext:
    enabled: true
    fsGroup: 1001

  ## @param primary.containerSecurityContext.enabled Enable container security context
  ## @param primary.containerSecurityContext.runAsUser User ID for the container
  ## @param primary.containerSecurityContext.runAsGroup Group ID for the container
  ## @param primary.containerSecurityContext.runAsNonRoot Require non-root user
  ## @param primary.containerSecurityContext.allowPrivilegeEscalation Disallow privilege escalation
  ## @param primary.containerSecurityContext.readOnlyRootFilesystem Read-only root filesystem
  ## @param primary.containerSecurityContext.capabilities.drop Capabilities to drop
  ## @param primary.containerSecurityContext.seccompProfile.type Seccomp profile type
  containerSecurityContext:
    enabled: true
    runAsUser: 1001
    runAsGroup: 1001
    runAsNonRoot: true
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: false
    capabilities:
      drop: ["ALL"]
    seccompProfile:
      type: RuntimeDefault

  ## @param primary.startupProbe.enabled Enable startup probe
  ## @param primary.startupProbe.initialDelaySeconds Startup probe initial delay
  ## @param primary.startupProbe.periodSeconds Startup probe period
  ## @param primary.startupProbe.timeoutSeconds Startup probe timeout
  ## @param primary.startupProbe.failureThreshold Startup probe failure threshold
  ## @param primary.startupProbe.successThreshold Startup probe success threshold
  startupProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 30
    successThreshold: 1

  ## @param primary.livenessProbe.enabled Enable liveness probe
  ## @param primary.livenessProbe.initialDelaySeconds Liveness probe initial delay
  ## @param primary.livenessProbe.periodSeconds Liveness probe period
  ## @param primary.livenessProbe.timeoutSeconds Liveness probe timeout
  ## @param primary.livenessProbe.failureThreshold Liveness probe failure threshold
  ## @param primary.livenessProbe.successThreshold Liveness probe success threshold
  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
    successThreshold: 1

  ## @param primary.readinessProbe.enabled Enable readiness probe
  ## @param primary.readinessProbe.initialDelaySeconds Readiness probe initial delay
  ## @param primary.readinessProbe.periodSeconds Readiness probe period
  ## @param primary.readinessProbe.timeoutSeconds Readiness probe timeout
  ## @param primary.readinessProbe.failureThreshold Readiness probe failure threshold
  ## @param primary.readinessProbe.successThreshold Readiness probe success threshold
  readinessProbe:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
    successThreshold: 1

  ## @param primary.persistence.enabled Enable persistence using PVC
  ## @param primary.persistence.storageClass PVC Storage Class
  ## @param primary.persistence.accessModes PVC access modes
  ## @param primary.persistence.size PVC size
  ## @param primary.persistence.existingClaim Name of existing PVC to use
  ## @param primary.persistence.mountPath Mount path for the data volume
  ## @param primary.persistence.annotations PVC annotations
  ## @param primary.persistence.labels PVC labels
  persistence:
    enabled: true
    storageClass: ""
    accessModes:
      - ReadWriteOnce
    size: 8Gi
    existingClaim: ""
    mountPath: /data/mariadb
    annotations: {}
    labels: {}

  ## @param primary.service.type Service type
  ## @param primary.service.ports.mariadb Service port
  ## @param primary.service.nodePorts.mariadb NodePort (when type is NodePort)
  ## @param primary.service.clusterIP Static ClusterIP
  ## @param primary.service.annotations Service annotations
  ## @param primary.service.labels Service labels
  ## @param primary.service.headless.annotations Headless service annotations
  service:
    type: ClusterIP
    ports:
      mariadb: 3306
    nodePorts:
      mariadb: ""
    clusterIP: ""
    annotations: {}
    labels: {}
    headless:
      annotations: {}

  ## @param primary.nodeSelector Node labels for pod assignment
  ## @param primary.tolerations Tolerations for pod assignment
  ## @param primary.affinity Affinity rules for pod assignment
  ## @param primary.podLabels Extra labels for pods
  ## @param primary.podAnnotations Extra annotations for pods
  ## @param primary.extraVolumes Extra volumes
  ## @param primary.extraVolumeMounts Extra volume mounts
  ## @param primary.extraEnvVars Extra environment variables
  ## @param primary.sidecars Extra sidecar containers
  ## @param primary.initContainers Extra init containers
  nodeSelector: {}
  tolerations: []
  affinity: {}
  podLabels: {}
  podAnnotations: {}
  extraVolumes: []
  extraVolumeMounts: []
  extraEnvVars: []
  sidecars: []
  initContainers: []

## @section MariaDB secondary parameters

## @param secondary.replicaCount Number of secondary replicas
## @param secondary.containerPorts.mariadb MariaDB secondary container port
secondary:
  replicaCount: 2
  containerPorts:
    mariadb: 3306
  resourcesPreset: "nano"
  resources: {}
  podSecurityContext:
    enabled: true
    fsGroup: 1001
  containerSecurityContext:
    enabled: true
    runAsUser: 1001
    runAsGroup: 1001
    runAsNonRoot: true
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: false
    capabilities:
      drop: ["ALL"]
    seccompProfile:
      type: RuntimeDefault
  startupProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 30
    successThreshold: 1
  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
    successThreshold: 1
  readinessProbe:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
    successThreshold: 1
  persistence:
    enabled: true
    storageClass: ""
    accessModes:
      - ReadWriteOnce
    size: 8Gi
    existingClaim: ""
    mountPath: /data/mariadb
    annotations: {}
    labels: {}
  service:
    type: ClusterIP
    ports:
      mariadb: 3306
    nodePorts:
      mariadb: ""
    clusterIP: ""
    annotations: {}
    labels: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}
  podLabels: {}
  podAnnotations: {}
  extraVolumes: []
  extraVolumeMounts: []
  extraEnvVars: []
  sidecars: []
  initContainers: []

## @section Network Policy
## @param networkPolicy.enabled Enable network policy
## @param networkPolicy.allowExternal Allow external connections
## @param networkPolicy.additionalRules Additional network policy rules
networkPolicy:
  enabled: false
  allowExternal: true
  additionalRules: []

## @section ServiceAccount parameters

## @param serviceAccount.create Create a ServiceAccount
## @param serviceAccount.name ServiceAccount name (generated if not set)
## @param serviceAccount.automountServiceAccountToken Automount API credentials
## @param serviceAccount.annotations ServiceAccount annotations
serviceAccount:
  create: true
  name: ""
  automountServiceAccountToken: false
  annotations: {}

## @section Metrics parameters

## @param metrics.enabled Enable Prometheus metrics via exporter sidecar
## @param metrics.image.registry Exporter image registry
## @param metrics.image.repository Exporter image repository
## @param metrics.image.tag Exporter image tag
## @param metrics.image.pullPolicy Exporter image pull policy
## @param metrics.containerPorts.metrics Exporter container port
## @param metrics.serviceMonitor.enabled Create ServiceMonitor resource
## @param metrics.serviceMonitor.interval Prometheus scrape interval
## @param metrics.serviceMonitor.scrapeTimeout Prometheus scrape timeout
## @param metrics.serviceMonitor.labels Additional labels for the ServiceMonitor
metrics:
  enabled: false
  image:
    registry: ghcr.io
    repository: kubelauncher/mysqld-exporter
    tag: 0.18.0
    pullPolicy: Always
  containerPorts:
    metrics: 9104
  serviceMonitor:
    enabled: false
    interval: ""
    scrapeTimeout: ""
    labels: {}
